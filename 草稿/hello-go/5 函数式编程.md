5 函数式编程
===



- 函数是一等公民，参数，变量，返回值都可以是函数
- 高阶函数
- 函数->闭包

正统的函数式编程
- 不可变性：不能有状态，只能有常量和函数。（甚至连选择语句和循环语句都不能有？）
- 函数只能有一个参数


### 资源管理与出错处理

defer调用 函数退出时运行
defer相当于 一个栈 先写的defer语句 比较晚执行
何时使用defer
- open / close
- lock / unlock
- printHeader / printFooter

panic() 错误处理函数 会让程序挂掉
- 停止当前函数执行
- 一直向上返回，执行每一层defer
- 如果没有遇见recover ，程序退出

recover() 恢复函数
- 仅在defer中使用
-  可以获取panic的值
- 如果无法处理 可重新panic

意料之中用error 意料之外用panic

### 测试
多做测试，而不是多做调试

传统测试 与 表格驱动测试
传统测试
- 测试数据和测试逻辑混在一起
- 出错信息不明确
- 一旦一个数据出错，测试全部结束
表格驱动测试
- 分离测试数据和测试逻辑
- 明确的出错信息
- 可以部分失败
- go语言的语法使得写表格驱动测试更容易

go test  => 还可以看代码覆盖率
go test -bench 性能测试
go tool cover 查看代码覆盖

### 生成文档
go doc 生成文档
godoc -http :60 查看文档



